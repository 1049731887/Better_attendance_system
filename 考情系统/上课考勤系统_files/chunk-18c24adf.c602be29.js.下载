(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18c24adf","chunk-5233eed6","chunk-d831f97e"],{"11c5":function(t,e,n){},3602:function(t,e,n){"use strict";n.r(e);var i=n("5530"),r=n("b775"),o=(n("1157"),"/Attendance");e["default"]={list:function(t){return Object(r["a"])({url:o+"/List",method:"post",data:t})},info:function(t){return Object(r["a"])({url:o+"/Info",method:"get",params:{id:t}})},save:function(t){return Object(r["a"])({url:o+"/Save",method:"post",data:t})},delete:function(t){return Object(r["a"])({url:o+"/Delete",method:"post",data:{id:t}})},getCurriculum:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r["a"])({url:o+"/GetCurriculum",method:"get",params:{ip:t,attendanceDate:e,classId:n}})},getCurriculumV2:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r["a"])({url:o+"/GetCurriculumV2",method:"get",params:{ip:t,attendanceDate:e,classId:n}})},check:function(t){return Object(r["a"])({url:o+"/Check",method:"get",params:t})},checkV2:function(t){return Object(r["a"])({url:o+"/CheckV2",method:"get",params:t})},getStudents:function(t){return Object(r["a"])({url:o+"/GetStudents",method:"get",params:Object(i["a"])({},t)})},getStudentsV2:function(t){return Object(r["a"])({url:o+"/GetStudentsV2",method:"get",params:Object(i["a"])({},t)})},getStudentsV3:function(t){return Object(r["a"])({url:o+"/GetStudentsV3",method:"get",params:t})},rollCall:function(t){return Object(r["a"])({url:o+"/RollCall",method:"post",data:t})},rollCallV2:function(t){return Object(r["a"])({url:o+"/RollCallV2",method:"post",data:t})},rollCallV3:function(t){return Object(r["a"])({url:o+"/RollCallV3",method:"post",data:t})},getTerms:function(){return Object(r["a"])({url:o+"/GetTerms",method:"get"})},getClasses:function(t){return Object(r["a"])({url:o+"/GetClasses",method:"get",params:{termId:t}})},stop:function(t){return Object(r["a"])({url:o+"/Stop",method:"post",data:t})},uploadLog:function(t){return Object(r["a"])({url:o+"/UploadLog",method:"post",data:t})}}},"4b13":function(t,e,n){"use strict";var i=n("e3d0"),r=n.n(i);r.a},"5be4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"keyboard"},[t._l(t.keys,(function(e){return n("div",{key:e,staticClass:"key",on:{click:function(n){return t.set(e)}}},[n("span",[t._v(t._s(e))])])})),n("div",{staticClass:"key key_action",on:{click:t.del}},[n("i",{staticClass:"el-icon-back"})]),n("div",{staticClass:"key key_action",on:{click:t.close}},[n("i",{staticClass:"el-icon-arrow-down"})])],2):t._e()},r=[],o={data:function(){return{keys:["1","2","3","4","5","6","7","8","9","0"],show:!1,value:""}},methods:{open:function(t){this.show=!0,this.value=t;var e=document.getElementById("mask");if(!e){var n=document.getElementById("app"),i=document.createElement("div");i.setAttribute("id","mask"),i.className="mask",i.addEventListener("click",this.close),n.appendChild(i)}},close:function(){this.show=!1;var t=document.getElementById("mask");t.remove()},del:function(){this.value.length>0&&(this.value=this.value.substring(0,this.value.length-1),console.log("this.value",this.value),this.$emit("set-data",this.value))},set:function(t){this.value.length<4&&(this.value=this.value+t,console.log("this.value",this.value),this.$emit("set-data",this.value))}}},a=o,s=(n("9e62"),n("2877")),l=Object(s["a"])(a,i,r,!1,null,"564b5276",null);e["default"]=l.exports},6062:function(t,e,n){"use strict";var i=n("6d61"),r=n("6566");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},6566:function(t,e,n){"use strict";var i=n("9bf2").f,r=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),l=n("2266"),c=n("7dd0"),u=n("2626"),d=n("83ab"),m=n("f183").fastKey,f=n("69f3"),h=f.set,p=f.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,i){s(t,u,e),h(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=i&&l(i,t[c],t,n)})),f=p(e),v=function(t,e,n){var i,r,o=f(t),a=y(t,e);return a?a.value=n:(o.last=a={index:r=m(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),d?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},y=function(t,e){var n,i=f(t),r=m(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(u.prototype,{clear:function(){var t=this,e=f(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=f(e),i=y(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),d?n.size--:e.size--}return!!i},forEach:function(t){var e,n=f(this),i=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!y(this,t)}}),o(u.prototype,n?{get:function(t){var e=y(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),d&&i(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(t,e,n){var i=e+" Iterator",r=p(e),o=p(i);c(t,e,(function(t,e){h(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"6d61":function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("f183"),l=n("2266"),c=n("19aa"),u=n("861d"),d=n("d039"),m=n("1c7e"),f=n("d44e"),h=n("7156");t.exports=function(t,e,n){var p=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),y=p?"set":"add",g=r[t],b=g&&g.prototype,S=g,C={},I=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(o(t,"function"!=typeof g||!(v||b.forEach&&!d((function(){(new g).entries().next()})))))S=n.getConstructor(e,t,p,y),s.REQUIRED=!0;else if(o(t,!0)){var w=new S,k=w[y](v?{}:-0,1)!=w,T=d((function(){w.has(1)})),_=m((function(t){new g(t)})),x=!v&&d((function(){var t=new g,e=5;while(e--)t[y](e,e);return!t.has(-0)}));_||(S=e((function(e,n){c(e,S,t);var i=h(new g,e,S);return void 0!=n&&l(n,i[y],i,p),i})),S.prototype=b,b.constructor=S),(T||x)&&(I("delete"),I("has"),p&&I("get")),(x||k)&&I(y),v&&b.clear&&delete b.clear}return C[t]=S,i({global:!0,forced:S!=g},C),f(S,t),v||n.setStrong(S,t,p),S}},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,o=n("44d2"),a=n("ae40"),s="find",l=!0,c=a(s);s in[]&&Array(1)[s]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},"802b":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"class_dialog"},[n("el-dialog",{attrs:{title:"系统设置",width:"550px",visible:t.visible},on:{"update:visible":function(e){t.visible=e},closed:t.onClosed}},[n("el-row",{staticStyle:{"margin-bottom":"10px","line-height":"28px"}},[n("el-col",{attrs:{span:10}},[n("label",[t._v("当前班级：")]),n("span",[t._v(t._s(t.data.SelectName))])]),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[n("label",{staticStyle:{display:"inline"}},[t._v("当前学期：")]),n("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini"},on:{change:t.setClass},model:{value:t.data.TermId,callback:function(e){t.$set(t.data,"TermId",e)},expression:"data.TermId"}},[t._l(t.terms,(function(t,e){return[n("el-option",{key:e,attrs:{value:t.TermId,label:t.TermName}})]}))],2)],1)],1),n("div",{staticClass:"content"},t._l(t.grades,(function(e){return n("div",{key:e.Id,staticClass:"item"},[n("div",{staticClass:"title"},[t._v(t._s(e.Name))]),n("div",{staticClass:"class"},t._l(e.children,(function(e,i){return n("div",{key:i,staticClass:"name",on:{click:function(n){return t.select(e)}}},[n("span",{class:{select:t.data.SelectId==e.Id}},[t._v(t._s(e.Name))])])})),0)])})),0),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticClass:"btn-save",attrs:{size:"mini"},on:{click:t.save}},[t._v("确 定")]),n("el-button",{staticClass:"btn-close",attrs:{size:"mini"},on:{click:t.close}},[t._v("取 消")])],1)],1)],1)},r=[],o=(n("4de4"),n("4160"),n("a630"),n("d81d"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),{data:function(){return{api:n("3602").default,visible:!1,grades:[],terms:[],data:{TermId:0,SelectId:null,SelectName:"选择班级"}}},mounted:function(){},methods:{init:function(){var t=this;this.api.getTerms().then((function(e){t.terms=e.Data,t.terms.length>0&&(t.data.TermId=t.terms[0].TermId,t.setClass())}))},setClass:function(){var t=this;this.api.getClasses(this.data.TermId).then((function(e){console.log("class",e),t.grades=[];var n=i(e.Data.map((function(t){return t.GradeId})));function i(t){var e=new Set(t),n=Array.from(e);return n}n.forEach((function(n){var i=e.Data.filter((function(t){return t.GradeId==n})),r={Id:n,Name:i[0].Grade,children:[]};r.children=i.map((function(t){return{Id:t.ClassId,Name:r.Name+t.Class,Pid:r.Id}})),t.grades.push(r)})),console.log(t.grades)}))},select:function(t){this.data.SelectId=t.Id,this.data.SelectName=t.Name},open:function(){this.visible=!0;var t=sessionStorage.getItem("current_class");if(t){var e=JSON.parse(t);this.data.SelectId=e.SelectId,this.data.SelectName=e.SelectName}this.init()},save:function(){sessionStorage.setItem("current_class",JSON.stringify(this.data)),this.$emit("on-save"),this.close()},close:function(){this.visible=!1},onClosed:function(){this.grades=[],this.terms=[]}}}),a=o,s=(n("4b13"),n("2877")),l=Object(s["a"])(a,i,r,!1,null,null,null);e["default"]=l.exports},9715:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"date",attrs:{id:"clock"}},[n("span",[t._v(t._s(t.date))]),n("span",{staticStyle:{float:"right"},style:"color: "+t.color},[t._v(t._s(t.time))])])},r=[],o=(n("fb6a"),{props:{height:{type:String,default:"50px"},color:{type:String,default:"#FFFFFF"}},data:function(){return{week:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],time:"",date:""}},mounted:function(){this.nowTimes()},beforeDestroy:function(){this.clear()},methods:{clear:function(){clearInterval(this.updateTime)},nowTimes:function(){this.updateTime(),setInterval(this.updateTime,1e3)},updateTime:function(){var t=new Date;this.time=this.zeroPadding(t.getHours(),2)+":"+this.zeroPadding(t.getMinutes(),2)+":"+this.zeroPadding(t.getSeconds(),2),this.date=this.zeroPadding(t.getFullYear(),4)+"-"+this.zeroPadding(t.getMonth()+1,2)+"-"+this.zeroPadding(t.getDate(),2)+" "+this.week[t.getDay()]},zeroPadding:function(t,e){for(var n="",i=0;i<e;i++)n+="0";return(n+t).slice(-e)}}}),a=o,s=(n("a5bc"),n("2877")),l=Object(s["a"])(a,i,r,!1,null,"9d4aaaae",null);e["a"]=l.exports},"9e62":function(t,e,n){"use strict";var i=n("ad12"),r=n.n(i);r.a},a5bc:function(t,e,n){"use strict";var i=n("11c5"),r=n.n(i);r.a},ad12:function(t,e,n){},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},dd7b:function(t,e,n){"use strict";n.r(e);var i,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap"},[t._m(0),n("div",{staticClass:"main"},[n("div",{staticClass:"content"},[n("div",{staticClass:"time rr-block"},[n("date",{staticClass:"t_date",attrs:{color:t.lostTime&&null==t.section.CreateTime?"#ffba00":"#ffffff"}})],1),t.btn_test?n("div",{staticClass:"test_box",style:t.show_test?"width: 500px;":"border: none;"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.show_test=!t.show_test}}},[t._v("测 试")])],1),t.show_test?n("el-row",{staticStyle:{"font-size":"14px"}},[n("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[n("el-date-picker",{attrs:{size:"mini",type:"datetime",placeholder:"选择日期时间"},model:{value:t.test_time,callback:function(e){t.test_time=e},expression:"test_time"}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:t.test_reset_time}},[t._v("设置当前时间")])],1),n("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[n("el-input",{staticStyle:{width:"220px"},attrs:{size:"mini",placeholder:"请输入设备 IP"},model:{value:t.test_Ip,callback:function(e){t.test_Ip=e},expression:"test_Ip"}}),n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:t.test_reset}},[t._v("设置 IP")])],1),n("el-col",{attrs:{span:24}},[t._v("当前时间: "+t._s(t.$commonJs.toDatetimeString(t.test_time)))]),n("el-col",{attrs:{span:24}},[t._v("课程开始时间: "+t._s(t.$commonJs.toDatetimeString(t.section.StartTime2)))]),n("el-col",{attrs:{span:24}},[t._v("课程结束时间: "+t._s(t.$commonJs.toDatetimeString(t.section.EndTime2)))]),n("el-col",{attrs:{span:24}},[t._v("点名开始时间: "+t._s(t.$commonJs.toDatetimeString(t.section.RollCallStartTime2)))]),n("el-col",{attrs:{span:24}},[t._v("点名结束时间: "+t._s(t.$commonJs.toDatetimeString(t.section.RollCallEndTime2)))]),n("el-col",{attrs:{span:24}},[t._v("是否可以点名: "+t._s(t.can_rc))]),n("el-col",{attrs:{span:24}},[t._v("点名超时: "+t._s(t.lostTime))]),n("el-col",{attrs:{span:24}},[t._v("编号: "+t._s(t.section.AttendanceId))]),n("el-col",{attrs:{span:24}},[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini"},on:{click:t.test_db}},[t._v("数据库")])],1)],1):t._e()],1):t._e(),n("el-form",{ref:"form",staticClass:"login-form detail-form",attrs:{model:t.section,rules:t.rules}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"上课班级"}},[n("span",{staticClass:"t_span"},[t._v(t._s(t.no_section?"无":t.section.Class))]),t.isMB?t._e():n("div",{staticClass:"setting"},[n("i",{staticClass:"el-icon-setting",on:{click:t.setting}})])])],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"当前节数"}},[n("span",{staticClass:"t_span"},[t._v(t._s(t.no_section?"无":t.section.SectionName))])])],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"上课科目"}},[t.no_section?n("span",{staticClass:"t_span"},[t._v("无")]):n("el-select",{on:{change:t.cs},model:{value:t.section.TimetableDtsId,callback:function(e){t.$set(t.section,"TimetableDtsId",e)},expression:"section.TimetableDtsId"}},[t._l(t.section.Dts,(function(t,e){return[n("el-option",{key:e,attrs:{value:t.TimetableDtsId,label:t.Subject}})]}))],2)],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"任课教师"}},[t.no_section?n("span",{staticClass:"t_span"},[t._v("无")]):[t.section.Teacher?n("span",{staticClass:"t_span"},[t._v(t._s(t.section.Teacher))]):n("span",{staticClass:"t_span"},[t._v("无任课教师")])]],2)],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{size:"mini",placeholder:"请输入备注"},model:{value:t.section.Reamrk,callback:function(e){t.$set(t.section,"Reamrk",e)},expression:"section.Reamrk"}})],1)],1)],1),n("el-row",[t.section.CreateTime?n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{color:"#00ad35"},attrs:{label:"点名时间"}},[n("span",{staticClass:"t_span"},[t._v(t._s(t.section.CreateTime))])])],1):[n("el-col",{attrs:{span:12}},[t.isMB?n("el-form-item",{attrs:{label:"验证码",prop:"Code"}},[n("el-input",{attrs:{"show-password":t.showPwd,readonly:"",placeholder:"请输入验证码"},on:{focus:t.showkb},nativeOn:{keydown:function(e){return t.listen(e)}},model:{value:t.section.Code,callback:function(e){t.$set(t.section,"Code",e)},expression:"section.Code"}}),t.section.Code?n("div",{staticClass:"view"},[n("i",{staticClass:"el-icon-view",on:{click:function(e){t.showPwd=!t.showPwd}}})]):t._e()],1):n("el-form-item",{attrs:{label:"验证码",prop:"Code"}},[n("el-input",{attrs:{"show-password":"",autocomplete:"new-password",placeholder:"请输入验证码"},model:{value:t.section.Code,callback:function(e){t.$set(t.section,"Code",e)},expression:"section.Code"}})],1)],1),n("el-col",{attrs:{span:12}},[n("span",{staticClass:"t_span",staticStyle:{color:"#959595","margin-left":"5px"}},[t._v("*4位数字")])])]],2)],1),n("div",{staticClass:"footer"},[t.isMB?n("div",{staticClass:"setting"},[n("i",{staticClass:"el-icon-setting",on:{click:t.setting}})]):t._e(),t.no_section?n("div",{staticClass:"no_section"},[t._v("当前无课程")]):n("div",[t.section.Teacher?t.lostTime?n("div",{staticClass:"no_section"},[t._v("已超过点名时限")]):n("div",{class:t.isLoading?"dis-btn":"btn",on:{click:t.login}},[t.section.CreateTime?n("span",[t._v("重新点名")]):[t.isLoading?n("i",{staticClass:"el-icon-loading"}):t._e(),n("span",[t._v("开始点名")])]],2):n("div",{staticClass:"no_section"},[t._v("无任课教师无法点名")])])])],1)]),n("keyboard",{ref:"keyboard",on:{"set-data":t.setCode}}),n("class-dialog",{ref:"classDialog",on:{"on-save":t.onSave}})],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m_title"},[i("img",{attrs:{src:n("f773"),width:"100%"}})])}],a=(n("7db0"),n("4160"),n("c975"),n("d81d"),n("a9e3"),n("d3b7"),n("159b"),n("ddb0"),n("5530")),s=n("ec1b"),l=n.n(s),c=n("9715"),u=n("802b"),d=n("5be4"),m=function(){return m=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},m.apply(this,arguments)};function f(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function h(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{while((void 0===e||e-- >0)&&!(i=o.next()).done)a.push(i.value)}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o["return"])&&n.call(o)}finally{if(r)throw r.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(p(arguments[e]));return t}function y(t){return t.nodeType===t.ELEMENT_NODE}function g(t){var e,n=null===(e=t)||void 0===e?void 0:e.host;return Boolean(n&&n.shadowRoot&&n.shadowRoot===t)}function b(t){var e=t.maskInputOptions,n=t.tagName,i=t.type,r=t.value,o=t.maskInputFn,a=r||"";return(e[n.toLowerCase()]||e[i])&&(a=o?o(a):"*".repeat(a.length)),a}(function(t){t[t["Document"]=0]="Document",t[t["DocumentType"]=1]="DocumentType",t[t["Element"]=2]="Element",t[t["Text"]=3]="Text",t[t["CDATA"]=4]="CDATA",t[t["Comment"]=5]="Comment"})(i||(i={}));var S="__rrweb_original__";function C(t){var e=t.getContext("2d");if(!e)return!0;for(var n=50,i=0;i<t.width;i+=n)for(var r=0;r<t.height;r+=n){var o=e.getImageData,a=S in o?o[S]:o,s=new Uint32Array(a.call(e,i,r,Math.min(n,t.width-i),Math.min(n,t.height-r)).data.buffer);if(s.some((function(t){return 0!==t})))return!1}return!0}var I,w,k=1,T=new RegExp("[^a-z0-9-_:]"),_=-2;function x(){return k++}function D(t){if(t instanceof HTMLFormElement)return"form";var e=t.tagName.toLowerCase().trim();return T.test(e)?"div":e}function M(t){try{var e=t.rules||t.cssRules;return e?Array.from(e).map(E).join(""):null}catch(n){return null}}function E(t){var e=t.cssText;if(O(t))try{e=M(t.styleSheet)||e}catch(n){}return e}function O(t){return"styleSheet"in t}function R(t){return t.cssRules?Array.from(t.cssRules).map((function(t){return t.cssText||""})).join(""):""}function N(t){var e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}var F=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,L=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,A=/^(data:)([^,]*),(.*)/i;function j(t,e){return(t||"").replace(F,(function(t,n,i,r,o,a){var s=i||o||a,l=n||r||"";if(!s)return t;if(!L.test(s))return"url("+l+s+l+")";if(A.test(s))return"url("+l+s+l+")";if("/"===s[0])return"url("+l+(N(e)+s)+l+")";var c=e.split("/"),u=s.split("/");c.pop();for(var d=0,m=u;d<m.length;d++){var f=m[d];"."!==f&&(".."===f?c.pop():c.push(f))}return"url("+l+c.join("/")+l+")"}))}var V=/^[^ \t\n\r\u000c]+/,P=/^[, \t\n\r\u000c]+/;function z(t,e){if(""===e.trim())return e;var n=0;function i(t){var i,r=t.exec(e.substring(n));return r?(i=r[0],n+=i.length,i):""}var r=[];while(1){if(i(P),n>=e.length)break;var o=i(V);if(","===o.slice(-1))o=$(t,o.substring(0,o.length-1)),r.push(o);else{var a="";o=$(t,o);var s=!1;while(1){var l=e.charAt(n);if(""===l){r.push((o+a).trim());break}if(s)")"===l&&(s=!1);else{if(","===l){n+=1,r.push((o+a).trim());break}"("===l&&(s=!0)}a+=l,n+=1}}}return r.join(", ")}function $(t,e){if(!e||""===e.trim())return e;var n=t.createElement("a");return n.href=e,n.href}function W(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function q(){var t=document.createElement("a");return t.href="",t.href}function G(t,e,n,i){return"src"===n||"href"===n&&i||"xlink:href"===n&&i&&"#"!==i[0]?$(t,i):"background"!==n||!i||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n&&i?z(t,i):"style"===n&&i?j(i,q()):"object"===e&&"data"===n&&i?$(t,i):i:$(t,i)}function U(t,e,n){if("string"===typeof e){if(t.classList.contains(e))return!0}else for(var i=0;i<t.classList.length;i++){var r=t.classList[i];if(e.test(r))return!0}return!!n&&t.matches(n)}function B(t,e,n){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){if("string"===typeof e){if(t.classList.contains(e))return!0}else t.classList.forEach((function(t){if(e.test(t))return!0}));return!(!n||!t.matches(n))||B(t.parentNode,e,n)}return t.nodeType,t.TEXT_NODE,B(t.parentNode,e,n)}function J(t,e,n){var i=t.contentWindow;if(i){var r,o=!1;try{r=i.document.readyState}catch(l){return}if("complete"===r){var a="about:blank";i.location.href===a&&t.src!==a&&""!==t.src?t.addEventListener("load",e):setTimeout(e,0)}else{var s=setTimeout((function(){o||(e(),o=!0)}),n);t.addEventListener("load",(function(){clearTimeout(s),o=!0,e()}))}}}function H(t,e){var n,r,o=e.doc,a=e.blockClass,s=e.blockSelector,l=e.maskTextClass,c=e.maskTextSelector,u=e.inlineStylesheet,d=e.maskInputOptions,m=void 0===d?{}:d,f=e.maskTextFn,h=e.maskInputFn,p=e.dataURLOptions,v=void 0===p?{}:p,y=e.inlineImages,g=e.recordCanvas,S=e.keepIframeSrcFn;if(o.__sn){var k=o.__sn.id;r=1===k?void 0:k}switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:i.Document,childNodes:[],compatMode:t.compatMode,rootId:r}:{type:i.Document,childNodes:[],rootId:r};case t.DOCUMENT_TYPE_NODE:return{type:i.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:r};case t.ELEMENT_NODE:for(var T=U(t,a,s),_=D(t),x={},E=0,O=Array.from(t.attributes);E<O.length;E++){var N=O[E],F=N.name,L=N.value;x[F]=G(o,_,F,L)}if("link"===_&&u){var A=Array.from(o.styleSheets).find((function(e){return e.href===t.href})),V=null;A&&(V=M(A)),V&&(delete x.rel,delete x.href,x._cssText=j(V,A.href))}if("style"===_&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){V=M(t.sheet);V&&(x._cssText=j(V,q()))}if("input"===_||"textarea"===_||"select"===_){L=t.value;"radio"!==x.type&&"checkbox"!==x.type&&"submit"!==x.type&&"button"!==x.type&&L?x.value=b({type:x.type,tagName:_,value:L,maskInputOptions:m,maskInputFn:h}):t.checked&&(x.checked=t.checked)}if("option"===_&&(t.selected&&!m["select"]?x.selected=!0:delete x.selected),"canvas"===_&&g)if("2d"===t.__context)C(t)||(x.rr_dataURL=t.toDataURL(v.type,v.quality));else if(!("__context"in t)){var P=t.toDataURL(v.type,v.quality),z=document.createElement("canvas");z.width=t.width,z.height=t.height;var $=z.toDataURL(v.type,v.quality);P!==$&&(x.rr_dataURL=P)}if("img"===_&&y){I||(I=o.createElement("canvas"),w=I.getContext("2d"));var J=t,H=J.crossOrigin;J.crossOrigin="anonymous";var Y=function(){try{I.width=J.naturalWidth,I.height=J.naturalHeight,w.drawImage(J,0,0),x.rr_dataURL=I.toDataURL(v.type,v.quality)}catch(t){console.warn("Cannot inline img src="+J.currentSrc+"! Error: "+t)}H?x.crossOrigin=H:delete x.crossOrigin};J.complete&&0!==J.naturalWidth?Y():J.onload=Y}if("audio"!==_&&"video"!==_||(x.rr_mediaState=t.paused?"paused":"played",x.rr_mediaCurrentTime=t.currentTime),t.scrollLeft&&(x.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(x.rr_scrollTop=t.scrollTop),T){var X=t.getBoundingClientRect(),K=X.width,Q=X.height;x={class:x["class"],rr_width:K+"px",rr_height:Q+"px"}}return"iframe"!==_||S(x.src)||(t.contentDocument||(x.rr_src=x.src),delete x.src),{type:i.Element,tagName:_,attributes:x,childNodes:[],isSVG:W(t)||void 0,needBlock:T,rootId:r};case t.TEXT_NODE:var Z=t.parentNode&&t.parentNode.tagName,tt=t.textContent,et="STYLE"===Z||void 0,nt="SCRIPT"===Z||void 0;if(et&&tt){try{(null===(n=t.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(tt=R(t.parentNode.sheet))}catch(it){console.warn("Cannot get CSS styles from text's parentNode. Error: "+it,t)}tt=j(tt,q())}return nt&&(tt="SCRIPT_PLACEHOLDER"),!et&&!nt&&B(t,l,c)&&tt&&(tt=f?f(tt):tt.replace(/[\S]/g,"*")),{type:i.Text,textContent:tt||"",isStyle:et,rootId:r};case t.CDATA_SECTION_NODE:return{type:i.CDATA,textContent:"",rootId:r};case t.COMMENT_NODE:return{type:i.Comment,textContent:t.textContent||"",rootId:r};default:return!1}}function Y(t){return void 0===t?"":t.toLowerCase()}function X(t,e){if(e.comment&&t.type===i.Comment)return!0;if(t.type===i.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"===typeof t.attributes.href&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Y(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Y(t.attributes.name)||"icon"===Y(t.attributes.rel)||"apple-touch-icon"===Y(t.attributes.rel)||"shortcut icon"===Y(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Y(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Y(t.attributes.property).match(/^(og|twitter|fb):/)||Y(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Y(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Y(t.attributes.name)||"googlebot"===Y(t.attributes.name)||"bingbot"===Y(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Y(t.attributes.name)||"generator"===Y(t.attributes.name)||"framework"===Y(t.attributes.name)||"publisher"===Y(t.attributes.name)||"progid"===Y(t.attributes.name)||Y(t.attributes.property).match(/^article:/)||Y(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Y(t.attributes.name)||"yandex-verification"===Y(t.attributes.name)||"csrf-token"===Y(t.attributes.name)||"p:domain_verify"===Y(t.attributes.name)||"verify-v1"===Y(t.attributes.name)||"verification"===Y(t.attributes.name)||"shopify-checkout-api-token"===Y(t.attributes.name)))return!0}}return!1}function K(t,e){var n,r=e.doc,o=e.map,a=e.blockClass,s=e.blockSelector,l=e.maskTextClass,c=e.maskTextSelector,u=e.skipChild,d=void 0!==u&&u,m=e.inlineStylesheet,f=void 0===m||m,h=e.maskInputOptions,p=void 0===h?{}:h,v=e.maskTextFn,b=e.maskInputFn,S=e.slimDOMOptions,C=e.dataURLOptions,I=void 0===C?{}:C,w=e.inlineImages,k=void 0!==w&&w,T=e.recordCanvas,D=void 0!==T&&T,M=e.onSerialize,E=e.onIframeLoad,O=e.iframeLoadTimeout,R=void 0===O?5e3:O,N=e.keepIframeSrcFn,F=void 0===N?function(){return!1}:N,L=e.preserveWhiteSpace,A=void 0===L||L,j=H(t,{doc:r,blockClass:a,blockSelector:s,maskTextClass:l,maskTextSelector:c,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:b,dataURLOptions:I,inlineImages:k,recordCanvas:D,keepIframeSrcFn:F});if(!j)return console.warn(t,"not serialized"),null;n="__sn"in t?t.__sn.id:X(j,S)||!A&&j.type===i.Text&&!j.isStyle&&!j.textContent.replace(/^\s+|\s+$/gm,"").length?_:x();var V=Object.assign(j,{id:n});if(t.__sn=V,n===_)return null;o[n]=t,M&&M(t);var P=!d;if(V.type===i.Element&&(P=P&&!V.needBlock,delete V.needBlock),(V.type===i.Document||V.type===i.Element)&&P){S.headWhitespace&&j.type===i.Element&&"head"===j.tagName&&(A=!1);for(var z={doc:r,map:o,blockClass:a,blockSelector:s,maskTextClass:l,maskTextSelector:c,skipChild:d,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:b,slimDOMOptions:S,dataURLOptions:I,inlineImages:k,recordCanvas:D,preserveWhiteSpace:A,onSerialize:M,onIframeLoad:E,iframeLoadTimeout:R,keepIframeSrcFn:F},$=0,W=Array.from(t.childNodes);$<W.length;$++){var q=W[$],G=K(q,z);G&&V.childNodes.push(G)}if(y(t)&&t.shadowRoot){V.isShadowHost=!0;for(var U=0,B=Array.from(t.shadowRoot.childNodes);U<B.length;U++){q=B[U],G=K(q,z);G&&(G.isShadow=!0,V.childNodes.push(G))}}}return t.parentNode&&g(t.parentNode)&&(V.isShadow=!0),V.type===i.Element&&"iframe"===V.tagName&&J(t,(function(){var e=t.contentDocument;if(e&&E){var n=K(e,{doc:e,map:o,blockClass:a,blockSelector:s,maskTextClass:l,maskTextSelector:c,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskTextFn:v,maskInputFn:b,slimDOMOptions:S,dataURLOptions:I,inlineImages:k,recordCanvas:D,preserveWhiteSpace:A,onSerialize:M,onIframeLoad:E,iframeLoadTimeout:R,keepIframeSrcFn:F});n&&E(t,n)}}),R),V}function Q(t,e){var n=e||{},i=n.blockClass,r=void 0===i?"rr-block":i,o=n.blockSelector,a=void 0===o?null:o,s=n.maskTextClass,l=void 0===s?"rr-mask":s,c=n.maskTextSelector,u=void 0===c?null:c,d=n.inlineStylesheet,m=void 0===d||d,f=n.inlineImages,h=void 0!==f&&f,p=n.recordCanvas,v=void 0!==p&&p,y=n.maskAllInputs,g=void 0!==y&&y,b=n.maskTextFn,S=n.maskInputFn,C=n.slimDOM,I=void 0!==C&&C,w=n.dataURLOptions,k=n.preserveWhiteSpace,T=n.onSerialize,_=n.onIframeLoad,x=n.iframeLoadTimeout,D=n.keepIframeSrcFn,M=void 0===D?function(){return!1}:D,E={},O=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===g?{password:!0}:g,R=!0===I||"all"===I?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===I,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===I?{}:I;return[K(t,{doc:t,map:E,blockClass:r,blockSelector:a,maskTextClass:l,maskTextSelector:u,skipChild:!1,inlineStylesheet:m,maskInputOptions:O,maskTextFn:b,maskInputFn:S,slimDOMOptions:R,dataURLOptions:w,inlineImages:h,recordCanvas:v,preserveWhiteSpace:k,onSerialize:T,onIframeLoad:_,iframeLoadTimeout:x,keepIframeSrcFn:M}),E]}var Z,tt,et,nt,it,rt,ot=/([^\\]):hover/;new RegExp(ot.source,"g");function at(t,e,n){void 0===n&&(n=document);var i={capture:!0,passive:!0};return n.addEventListener(t,e,i),function(){return n.removeEventListener(t,e,i)}}function st(){return{map:{},getId:function(t){return t&&t.__sn?t.__sn.id:-1},getNode:function(t){return this.map[t]||null},removeNodeFromMap:function(t){var e=this,n=t.__sn&&t.__sn.id;delete this.map[n],t.childNodes&&t.childNodes.forEach((function(t){return e.removeNodeFromMap(t)}))},has:function(t){return this.map.hasOwnProperty(t)},reset:function(){this.map={}}}}(function(t){t[t["DomContentLoaded"]=0]="DomContentLoaded",t[t["Load"]=1]="Load",t[t["FullSnapshot"]=2]="FullSnapshot",t[t["IncrementalSnapshot"]=3]="IncrementalSnapshot",t[t["Meta"]=4]="Meta",t[t["Custom"]=5]="Custom",t[t["Plugin"]=6]="Plugin"})(Z||(Z={})),function(t){t[t["Mutation"]=0]="Mutation",t[t["MouseMove"]=1]="MouseMove",t[t["MouseInteraction"]=2]="MouseInteraction",t[t["Scroll"]=3]="Scroll",t[t["ViewportResize"]=4]="ViewportResize",t[t["Input"]=5]="Input",t[t["TouchMove"]=6]="TouchMove",t[t["MediaInteraction"]=7]="MediaInteraction",t[t["StyleSheetRule"]=8]="StyleSheetRule",t[t["CanvasMutation"]=9]="CanvasMutation",t[t["Font"]=10]="Font",t[t["Log"]=11]="Log",t[t["Drag"]=12]="Drag",t[t["StyleDeclaration"]=13]="StyleDeclaration"}(tt||(tt={})),function(t){t[t["MouseUp"]=0]="MouseUp",t[t["MouseDown"]=1]="MouseDown",t[t["Click"]=2]="Click",t[t["ContextMenu"]=3]="ContextMenu",t[t["DblClick"]=4]="DblClick",t[t["Focus"]=5]="Focus",t[t["Blur"]=6]="Blur",t[t["TouchStart"]=7]="TouchStart",t[t["TouchMove_Departed"]=8]="TouchMove_Departed",t[t["TouchEnd"]=9]="TouchEnd",t[t["TouchCancel"]=10]="TouchCancel"}(et||(et={})),function(t){t[t["2D"]=0]="2D",t[t["WebGL"]=1]="WebGL",t[t["WebGL2"]=2]="WebGL2"}(nt||(nt={})),function(t){t[t["Play"]=0]="Play",t[t["Pause"]=1]="Pause",t[t["Seeked"]=2]="Seeked",t[t["VolumeChange"]=3]="VolumeChange"}(it||(it={})),function(t){t["Start"]="start",t["Pause"]="pause",t["Resume"]="resume",t["Resize"]="resize",t["Finish"]="finish",t["FullsnapshotRebuilded"]="fullsnapshot-rebuilded",t["LoadStylesheetStart"]="load-stylesheet-start",t["LoadStylesheetEnd"]="load-stylesheet-end",t["SkipStart"]="skip-start",t["SkipEnd"]="skip-end",t["MouseInteraction"]="mouse-interaction",t["EventCast"]="event-cast",t["CustomEvent"]="custom-event",t["Flush"]="flush",t["StateChange"]="state-change",t["PlayBack"]="play-back"}(rt||(rt={}));var lt="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",ct={map:{},getId:function(){return console.error(lt),-1},getNode:function(){return console.error(lt),null},removeNodeFromMap:function(){console.error(lt)},has:function(){return console.error(lt),!1},reset:function(){console.error(lt)}};function ut(t,e,n){void 0===n&&(n={});var i=null,r=0;return function(o){var a=Date.now();r||!1!==n.leading||(r=a);var s=e-(a-r),l=this,c=arguments;s<=0||s>e?(i&&(clearTimeout(i),i=null),r=a,t.apply(l,c)):i||!1===n.trailing||(i=setTimeout((function(){r=!1===n.leading?0:Date.now(),i=null,t.apply(l,c)}),s))}}function dt(t,e,n,i,r){void 0===r&&(r=window);var o=r.Object.getOwnPropertyDescriptor(t,e);return r.Object.defineProperty(t,e,i?n:{set:function(t){var e=this;setTimeout((function(){n.set.call(e,t)}),0),o&&o.set&&o.set.call(this,t)}}),function(){return dt(t,e,o||{},!0)}}function mt(t,e,n){try{if(!(e in t))return function(){};var i=t[e],r=n(i);return"function"===typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:i}})),t[e]=r,function(){t[e]=i}}catch(o){return function(){}}}function ft(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ht(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function pt(t,e){if(!t)return!1;if(t.nodeType===t.ELEMENT_NODE){var n=!1;if("string"===typeof e){if(void 0!==t.closest)return null!==t.closest("."+e);n=t.classList.contains(e)}else t.classList.forEach((function(t){e.test(t)&&(n=!0)}));return n||pt(t.parentNode,e)}return t.nodeType,t.TEXT_NODE,pt(t.parentNode,e)}function vt(t){return"__sn"in t&&t.__sn.id===_}function yt(t,e){if(g(t))return!1;var n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||yt(t.parentNode,e))}function gt(t){return Boolean(t.changedTouches)}function bt(t){void 0===t&&(t=window),"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(t){if(!(0 in arguments))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(ct=new Proxy(ct,{get:function(t,e,n){return"map"===e&&console.error(lt),Reflect.get(t,e,n)}}));(function(){function t(){this.reset()}t.prototype.add=function(t){var e=this.indexes.get(t.parentId),n={id:t.node.id,mutation:t,children:[],texts:[],attributes:[]};e?(n.parent=e,e.children[n.id]=n):this.tree[n.id]=n,this.indexes.set(n.id,n)},t.prototype.remove=function(t,e){var n=this,i=this.indexes.get(t.parentId),r=this.indexes.get(t.id),o=function(t){n.removeIdSet.add(t);var i=e.getNode(t);null===i||void 0===i||i.childNodes.forEach((function(t){"__sn"in t&&o(t.__sn.id)}))},a=function(e){n.removeIdSet.add(e.id),Object.values(e.children).forEach((function(t){return a(t)}));var i=n.indexes.get(e.id);if(i){var r=i.parent;r&&(delete i.parent,delete r.children[i.id],n.indexes.delete(t.id))}};r?i?(delete r.parent,delete i.children[r.id],this.indexes.delete(t.id),a(r)):(delete this.tree[r.id],this.indexes.delete(r.id),a(r)):(this.removeNodeMutations.push(t),o(t.id))},t.prototype.text=function(t){var e=this.indexes.get(t.id);e?e.texts.push(t):this.textMutations.push(t)},t.prototype.attribute=function(t){var e=this.indexes.get(t.id);e?e.attributes.push(t):this.attributeMutations.push(t)},t.prototype.scroll=function(t){this.scrollMap.set(t.id,t)},t.prototype.input=function(t){this.inputMap.set(t.id,t)},t.prototype.flush=function(){var t,e,n,i,r=this,o=this,a=o.tree,s=o.removeNodeMutations,l=o.textMutations,c=o.attributeMutations,u={source:tt.Mutation,removes:s,texts:l,attributes:c,adds:[]},d=function(t,e){e&&r.removeIdSet.add(t.id),u.texts=u.texts.concat(e?[]:t.texts).filter((function(t){return!r.removeIdSet.has(t.id)})),u.attributes=u.attributes.concat(e?[]:t.attributes).filter((function(t){return!r.removeIdSet.has(t.id)})),r.removeIdSet.has(t.id)||r.removeIdSet.has(t.mutation.parentId)||e?Object.values(t.children).forEach((function(t){return d(t,!0)})):(u.adds.push(t.mutation),t.children&&Object.values(t.children).forEach((function(t){return d(t,!1)})))};Object.values(a).forEach((function(t){return d(t,!1)}));try{for(var m=h(this.scrollMap.keys()),f=m.next();!f.done;f=m.next()){var p=f.value;this.removeIdSet.has(p)&&this.scrollMap.delete(p)}}catch(S){t={error:S}}finally{try{f&&!f.done&&(e=m.return)&&e.call(m)}finally{if(t)throw t.error}}try{for(var v=h(this.inputMap.keys()),y=v.next();!y.done;y=v.next()){p=y.value;this.removeIdSet.has(p)&&this.inputMap.delete(p)}}catch(C){n={error:C}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}var g=new Map(this.scrollMap),b=new Map(this.inputMap);return this.reset(),{mutationData:u,scrollMap:g,inputMap:b}},t.prototype.reset=function(){this.tree=[],this.indexes=new Map,this.removeNodeMutations=[],this.textMutations=[],this.attributeMutations=[],this.removeIdSet=new Set,this.scrollMap=new Map,this.inputMap=new Map},t.prototype.idRemoved=function(t){return this.removeIdSet.has(t)}})();function St(t){return"__sn"in t&&(t.__sn.type===i.Element&&"iframe"===t.__sn.tagName)}function Ct(t){var e;return Boolean(null===(e=t)||void 0===e?void 0:e.shadowRoot)}function It(t){return"__ln"in t}var wt=function(){function t(){this.length=0,this.head=null}return t.prototype.get=function(t){if(t>=this.length)throw new Error("Position outside of list range");for(var e=this.head,n=0;n<t;n++)e=(null===e||void 0===e?void 0:e.next)||null;return e},t.prototype.addNode=function(t){var e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&It(t.previousSibling)){var n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&It(t.nextSibling)&&t.nextSibling.__ln.previous){n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;this.length++},t.prototype.removeNode=function(t){var e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next&&(e.next.previous=e.previous)):(this.head=e.next,this.head&&(this.head.previous=null)),t.__ln&&delete t.__ln,this.length--)},t}(),kt=function(t,e){return t+"@"+e};function Tt(t){return"__sn"in t}var _t=function(){function t(){var t=this;this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(e){e.forEach(t.processMutation),t.emit()},this.emit=function(){var e,n,i,r;if(!t.frozen&&!t.locked){var o=[],a=new wt,s=function(e){var n=e,i=_;while(i===_)n=n&&n.nextSibling,i=n&&t.mirror.getId(n);return i},l=function(e){var n,i=e.getRootNode?null===(n=e.getRootNode())||void 0===n?void 0:n.host:null,r=!t.doc.contains(e)&&(!(i instanceof Node)||!t.doc.contains(i));if(e.parentNode&&!r){var l=g(e.parentNode)?t.mirror.getId(i):t.mirror.getId(e.parentNode),c=s(e);if(-1===l||-1===c)return a.addNode(e);var u=K(e,{doc:t.doc,map:t.mirror.map,blockClass:t.blockClass,blockSelector:t.blockSelector,maskTextClass:t.maskTextClass,maskTextSelector:t.maskTextSelector,skipChild:!0,inlineStylesheet:t.inlineStylesheet,maskInputOptions:t.maskInputOptions,maskTextFn:t.maskTextFn,maskInputFn:t.maskInputFn,slimDOMOptions:t.slimDOMOptions,recordCanvas:t.recordCanvas,inlineImages:t.inlineImages,onSerialize:function(n){St(n)&&t.iframeManager.addIframe(n),Ct(e)&&t.shadowDomManager.addShadowRoot(e.shadowRoot,document)},onIframeLoad:function(e,n){t.iframeManager.attachIframe(e,n)}});u&&o.push({parentId:l,nextId:c,node:u})}};while(t.mapRemoves.length)t.mirror.removeNodeFromMap(t.mapRemoves.shift());try{for(var c=h(t.movedSet),u=c.next();!u.done;u=c.next()){var d=u.value;Dt(t.removes,d,t.mirror)&&!t.movedSet.has(d.parentNode)||l(d)}}catch(w){e={error:w}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}try{for(var m=h(t.addedSet),f=m.next();!f.done;f=m.next()){d=f.value;Mt(t.droppedSet,d)||Dt(t.removes,d,t.mirror)?Mt(t.movedSet,d)?l(d):t.droppedSet.add(d):l(d)}}catch(k){i={error:k}}finally{try{f&&!f.done&&(r=m.return)&&r.call(m)}finally{if(i)throw i.error}}var p=null;while(a.length){var v=null;if(p){var y=t.mirror.getId(p.value.parentNode),b=s(p.value);-1!==y&&-1!==b&&(v=p)}if(!v)for(var S=a.length-1;S>=0;S--){var C=a.get(S);if(C){y=t.mirror.getId(C.value.parentNode),b=s(C.value);if(-1!==y&&-1!==b){v=C;break}}}if(!v){while(a.head)a.removeNode(a.head.value);break}p=v.previous,a.removeNode(v.value),l(v.value)}var I={texts:t.texts.map((function(e){return{id:t.mirror.getId(e.node),value:e.value}})).filter((function(e){return t.mirror.has(e.id)})),attributes:t.attributes.map((function(e){return{id:t.mirror.getId(e.node),attributes:e.attributes}})).filter((function(e){return t.mirror.has(e.id)})),removes:t.removes,adds:o};(I.texts.length||I.attributes.length||I.removes.length||I.adds.length)&&(t.texts=[],t.attributes=[],t.removes=[],t.addedSet=new Set,t.movedSet=new Set,t.droppedSet=new Set,t.movedMap={},t.mutationCb(I))}},this.processMutation=function(e){var n,i,r,o;if(!vt(e.target))switch(e.type){case"characterData":var a=e.target.textContent;pt(e.target,t.blockClass)||a===e.oldValue||t.texts.push({value:B(e.target,t.maskTextClass,t.maskTextSelector)&&a?t.maskTextFn?t.maskTextFn(a):a.replace(/[\S]/g,"*"):a,node:e.target});break;case"attributes":var s=e.target;a=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(a=b({maskInputOptions:t.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:a,maskInputFn:t.maskInputFn})),pt(e.target,t.blockClass)||a===e.oldValue)return;var l=t.attributes.find((function(t){return t.node===e.target}));if(l||(l={node:e.target,attributes:{}},t.attributes.push(l)),"style"===e.attributeName){var c=t.doc.createElement("span");e.oldValue&&c.setAttribute("style",e.oldValue),void 0!==l.attributes.style&&null!==l.attributes.style||(l.attributes.style={});var u=l.attributes.style;try{for(var d=h(Array.from(s.style)),m=d.next();!m.done;m=d.next()){var f=m.value,p=s.style.getPropertyValue(f),v=s.style.getPropertyPriority(f);p===c.style.getPropertyValue(f)&&v===c.style.getPropertyPriority(f)||(u[f]=""===v?p:[p,v])}}catch(C){n={error:C}}finally{try{m&&!m.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}try{for(var y=h(Array.from(c.style)),S=y.next();!S.done;S=y.next()){f=S.value;""===s.style.getPropertyValue(f)&&(u[f]=!1)}}catch(I){r={error:I}}finally{try{S&&!S.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}else l.attributes[e.attributeName]=G(t.doc,e.target.tagName,e.attributeName,a);break;case"childList":e.addedNodes.forEach((function(n){return t.genAdds(n,e.target)})),e.removedNodes.forEach((function(n){var i=t.mirror.getId(n),r=g(e.target)?t.mirror.getId(e.target.host):t.mirror.getId(e.target);pt(e.target,t.blockClass)||vt(n)||(t.addedSet.has(n)?(xt(t.addedSet,n),t.droppedSet.add(n)):t.addedSet.has(e.target)&&-1===i||yt(e.target,t.mirror)||(t.movedSet.has(n)&&t.movedMap[kt(i,r)]?xt(t.movedSet,n):t.removes.push({parentId:r,id:i,isShadow:!!g(e.target)||void 0})),t.mapRemoves.push(n))}));break}},this.genAdds=function(e,n){if(!n||!pt(n,t.blockClass)){if(Tt(e)){if(vt(e))return;t.movedSet.add(e);var i=null;n&&Tt(n)&&(i=n.__sn.id),i&&(t.movedMap[kt(e.__sn.id,i)]=!0)}else t.addedSet.add(e),t.droppedSet.delete(e);pt(e,t.blockClass)||e.childNodes.forEach((function(e){return t.genAdds(e)}))}}}return t.prototype.init=function(t){var e=this;["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","recordCanvas","inlineImages","slimDOMOptions","doc","mirror","iframeManager","shadowDomManager","canvasManager"].forEach((function(n){e[n]=t[n]}))},t.prototype.freeze=function(){this.frozen=!0,this.canvasManager.freeze()},t.prototype.unfreeze=function(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()},t.prototype.isFrozen=function(){return this.frozen},t.prototype.lock=function(){this.locked=!0,this.canvasManager.lock()},t.prototype.unlock=function(){this.locked=!1,this.canvasManager.unlock(),this.emit()},t.prototype.reset=function(){this.canvasManager.reset()},t}();function xt(t,e){t.delete(e),e.childNodes.forEach((function(e){return xt(t,e)}))}function Dt(t,e,n){var i=e.parentNode;if(!i)return!1;var r=n.getId(i);return!!t.some((function(t){return t.id===r}))||Dt(t,i,n)}function Mt(t,e){var n=e.parentNode;return!!n&&(!!t.has(n)||Mt(t,n))}var Et=_t,Ot=[],Rt="undefined"!==typeof CSSGroupingRule,Nt="undefined"!==typeof CSSMediaRule,Ft="undefined"!==typeof CSSSupportsRule,Lt="undefined"!==typeof CSSConditionRule;function At(t){try{if("composedPath"in t){var e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0];return t.target}catch(n){return t.target}}function jt(t,e){var n,i,r,o=new Et;Ot.push(o),o.init(t);var a=window.MutationObserver||window.__rrMutationObserver,s=null===(r=null===(i=null===(n=window)||void 0===n?void 0:n.Zone)||void 0===i?void 0:i.__symbol__)||void 0===r?void 0:r.call(i,"MutationObserver");s&&window[s]&&(a=window[s]);var l=new a(o.processMutations.bind(o));return l.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),l}function Vt(t){var e=t.mousemoveCb,n=t.sampling,i=t.doc,r=t.mirror;if(!1===n.mousemove)return function(){};var o,a="number"===typeof n.mousemove?n.mousemove:50,s="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500,l=[],c=ut((function(t){var n=Date.now()-o;e(l.map((function(t){return t.timeOffset-=n,t})),t),l=[],o=null}),s),u=ut((function(t){var e=At(t),n=gt(t)?t.changedTouches[0]:t,i=n.clientX,a=n.clientY;o||(o=Date.now()),l.push({x:i,y:a,id:r.getId(e),timeOffset:Date.now()-o}),c("undefined"!==typeof DragEvent&&t instanceof DragEvent?tt.Drag:t instanceof MouseEvent?tt.MouseMove:tt.TouchMove)}),a,{trailing:!1}),d=[at("mousemove",u,i),at("touchmove",u,i),at("drag",u,i)];return function(){d.forEach((function(t){return t()}))}}function Pt(t){var e=t.mouseInteractionCb,n=t.doc,i=t.mirror,r=t.blockClass,o=t.sampling;if(!1===o.mouseInteraction)return function(){};var a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,s=[],l=function(t){return function(n){var o=At(n);if(!pt(o,r)){var a=gt(n)?n.changedTouches[0]:n;if(a){var s=i.getId(o),l=a.clientX,c=a.clientY;e({type:et[t],id:s,x:l,y:c})}}}};return Object.keys(et).filter((function(t){return Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t]})).forEach((function(t){var e=t.toLowerCase(),i=l(t);s.push(at(e,i,n))})),function(){s.forEach((function(t){return t()}))}}function zt(t){var e=t.scrollCb,n=t.doc,i=t.mirror,r=t.blockClass,o=t.sampling,a=ut((function(t){var o=At(t);if(o&&!pt(o,r)){var a=i.getId(o);if(o===n){var s=n.scrollingElement||n.documentElement;e({id:a,x:s.scrollLeft,y:s.scrollTop})}else e({id:a,x:o.scrollLeft,y:o.scrollTop})}}),o.scroll||100);return at("scroll",a,n)}function $t(t){var e=t.viewportResizeCb,n=-1,i=-1,r=ut((function(){var t=ft(),r=ht();n===t&&i===r||(e({width:Number(r),height:Number(t)}),n=t,i=r)}),200);return at("resize",r,window)}function Wt(t,e){var n=m({},t);return e||delete n.userTriggered,n}var qt=["INPUT","TEXTAREA","SELECT"],Gt=new WeakMap;function Ut(t){var e=t.inputCb,n=t.doc,i=t.mirror,r=t.blockClass,o=t.ignoreClass,a=t.maskInputOptions,s=t.maskInputFn,l=t.sampling,c=t.userTriggeredOnInput;function u(t){var e=At(t),i=t.isTrusted;if(e&&"OPTION"===e.tagName&&(e=e.parentElement),e&&e.tagName&&!(qt.indexOf(e.tagName)<0)&&!pt(e,r)){var l=e.type;if(!e.classList.contains(o)){var u=e.value,m=!1;"radio"===l||"checkbox"===l?m=e.checked:(a[e.tagName.toLowerCase()]||a[l])&&(u=b({maskInputOptions:a,tagName:e.tagName,type:l,value:u,maskInputFn:s})),d(e,Wt({text:u,isChecked:m,userTriggered:i},c));var f=e.name;"radio"===l&&f&&m&&n.querySelectorAll('input[type="radio"][name="'+f+'"]').forEach((function(t){t!==e&&d(t,Wt({text:t.value,isChecked:!m,userTriggered:!1},c))}))}}}function d(t,n){var r=Gt.get(t);if(!r||r.text!==n.text||r.isChecked!==n.isChecked){Gt.set(t,n);var o=i.getId(t);e(m(m({},n),{id:o}))}}var f="last"===l.input?["change"]:["input","change"],h=f.map((function(t){return at(t,u,n)})),p=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),y=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"],[HTMLOptionElement.prototype,"selected"]];return p&&p.set&&h.push.apply(h,v(y.map((function(t){return dt(t[0],t[1],{set:function(){u({target:this})}})})))),function(){h.forEach((function(t){return t()}))}}function Bt(t){var e=[];function n(t,e){if(Rt&&t.parentRule instanceof CSSGroupingRule||Nt&&t.parentRule instanceof CSSMediaRule||Ft&&t.parentRule instanceof CSSSupportsRule||Lt&&t.parentRule instanceof CSSConditionRule){var n=Array.from(t.parentRule.cssRules),i=n.indexOf(t);e.unshift(i)}else{n=Array.from(t.parentStyleSheet.cssRules),i=n.indexOf(t);e.unshift(i)}return e}return n(t,e)}function Jt(t,e){var n=t.styleSheetRuleCb,i=t.mirror,r=e.win,o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(t,e){var r=i.getId(this.ownerNode);return-1!==r&&n({id:r,adds:[{rule:t,index:e}]}),o.apply(this,arguments)};var a=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=function(t){var e=i.getId(this.ownerNode);return-1!==e&&n({id:e,removes:[{index:t}]}),a.apply(this,arguments)};var s={};Rt?s.CSSGroupingRule=r.CSSGroupingRule:(Nt&&(s.CSSMediaRule=r.CSSMediaRule),Lt&&(s.CSSConditionRule=r.CSSConditionRule),Ft&&(s.CSSSupportsRule=r.CSSSupportsRule));var l={};return Object.entries(s).forEach((function(t){var e=p(t,2),r=e[0],o=e[1];l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(t,e){var o=i.getId(this.parentStyleSheet.ownerNode);return-1!==o&&n({id:o,adds:[{rule:t,index:v(Bt(this),[e||0])}]}),l[r].insertRule.apply(this,arguments)},o.prototype.deleteRule=function(t){var e=i.getId(this.parentStyleSheet.ownerNode);return-1!==e&&n({id:e,removes:[{index:v(Bt(this),[t])}]}),l[r].deleteRule.apply(this,arguments)}})),function(){r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=a,Object.entries(s).forEach((function(t){var e=p(t,2),n=e[0],i=e[1];i.prototype.insertRule=l[n].insertRule,i.prototype.deleteRule=l[n].deleteRule}))}}function Ht(t,e){var n=t.styleDeclarationCb,i=t.mirror,r=e.win,o=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=function(t,e,r){var a,s,l=i.getId(null===(s=null===(a=this.parentRule)||void 0===a?void 0:a.parentStyleSheet)||void 0===s?void 0:s.ownerNode);return-1!==l&&n({id:l,set:{property:t,value:e,priority:r},index:Bt(this.parentRule)}),o.apply(this,arguments)};var a=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=function(t){var e,r,o=i.getId(null===(r=null===(e=this.parentRule)||void 0===e?void 0:e.parentStyleSheet)||void 0===r?void 0:r.ownerNode);return-1!==o&&n({id:o,remove:{property:t},index:Bt(this.parentRule)}),a.apply(this,arguments)},function(){r.CSSStyleDeclaration.prototype.setProperty=o,r.CSSStyleDeclaration.prototype.removeProperty=a}}function Yt(t){var e=t.mediaInteractionCb,n=t.blockClass,i=t.mirror,r=t.sampling,o=function(t){return ut((function(r){var o=At(r);if(o&&!pt(o,n)){var a=o,s=a.currentTime,l=a.volume,c=a.muted;e({type:t,id:i.getId(o),currentTime:s,volume:l,muted:c})}}),r.media||500)},a=[at("play",o(0)),at("pause",o(1)),at("seeked",o(2)),at("volumechange",o(3))];return function(){a.forEach((function(t){return t()}))}}function Xt(t){var e=t.fontCb,n=t.doc,i=n.defaultView;if(!i)return function(){};var r=[],o=new WeakMap,a=i.FontFace;i.FontFace=function(t,e,n){var i=new a(t,e,n);return o.set(i,{family:t,buffer:"string"!==typeof e,descriptors:n,fontSource:"string"===typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),i};var s=mt(n.fonts,"add",(function(t){return function(n){return setTimeout((function(){var t=o.get(n);t&&(e(t),o.delete(n))}),0),t.apply(this,[n])}}));return r.push((function(){i.FontFace=a})),r.push(s),function(){r.forEach((function(t){return t()}))}}function Kt(t,e){var n=t.mutationCb,i=t.mousemoveCb,r=t.mouseInteractionCb,o=t.scrollCb,a=t.viewportResizeCb,s=t.inputCb,l=t.mediaInteractionCb,c=t.styleSheetRuleCb,u=t.styleDeclarationCb,d=t.canvasMutationCb,m=t.fontCb;t.mutationCb=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];e.mutation&&e.mutation.apply(e,v(t)),n.apply(void 0,v(t))},t.mousemoveCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mousemove&&e.mousemove.apply(e,v(t)),i.apply(void 0,v(t))},t.mouseInteractionCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mouseInteraction&&e.mouseInteraction.apply(e,v(t)),r.apply(void 0,v(t))},t.scrollCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.scroll&&e.scroll.apply(e,v(t)),o.apply(void 0,v(t))},t.viewportResizeCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.viewportResize&&e.viewportResize.apply(e,v(t)),a.apply(void 0,v(t))},t.inputCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.input&&e.input.apply(e,v(t)),s.apply(void 0,v(t))},t.mediaInteractionCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.mediaInteaction&&e.mediaInteaction.apply(e,v(t)),l.apply(void 0,v(t))},t.styleSheetRuleCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.styleSheetRule&&e.styleSheetRule.apply(e,v(t)),c.apply(void 0,v(t))},t.styleDeclarationCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.styleDeclaration&&e.styleDeclaration.apply(e,v(t)),u.apply(void 0,v(t))},t.canvasMutationCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.canvasMutation&&e.canvasMutation.apply(e,v(t)),d.apply(void 0,v(t))},t.fontCb=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.font&&e.font.apply(e,v(t)),m.apply(void 0,v(t))}}function Qt(t,e){var n,i;void 0===e&&(e={});var r=t.doc.defaultView;if(!r)return function(){};Kt(t,e);var o=jt(t,t.doc),a=Vt(t),s=Pt(t),l=zt(t),c=$t(t),u=Ut(t),d=Yt(t),m=Jt(t,{win:r}),f=Ht(t,{win:r}),p=t.collectFonts?Xt(t):function(){},v=[];try{for(var y=h(t.plugins),g=y.next();!g.done;g=y.next()){var b=g.value;v.push(b.observer(b.callback,r,b.options))}}catch(S){n={error:S}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}return function(){Ot.forEach((function(t){return t.reset()})),o.disconnect(),a(),s(),l(),c(),u(),d(),m(),f(),p(),v.forEach((function(t){return t()}))}}var Zt=function(){function t(t){this.iframes=new WeakMap,this.mutationCb=t.mutationCb}return t.prototype.addIframe=function(t){this.iframes.set(t,!0)},t.prototype.addLoadListener=function(t){this.loadListener=t},t.prototype.attachIframe=function(t,e){var n;this.mutationCb({adds:[{parentId:t.__sn.id,nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,t)},t}(),te=function(){function t(t){this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror}return t.prototype.addShadowRoot=function(t,e){jt(m(m({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t),zt(m(m({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))},t}();function ee(t,e,n,i){var r,o,a=[],s=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype),l=function(i){try{if("function"!==typeof e.CanvasRenderingContext2D.prototype[i])return"continue";var r=mt(e.CanvasRenderingContext2D.prototype,i,(function(e){return function(){for(var r=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return pt(this.canvas,n)||setTimeout((function(){var e=v(o);if("drawImage"===i&&e[0]&&e[0]instanceof HTMLCanvasElement){var n=e[0],a=n.getContext("2d"),s=null===a||void 0===a?void 0:a.getImageData(0,0,n.width,n.height),l=null===s||void 0===s?void 0:s.data;e[0]=JSON.stringify(l)}t(r.canvas,{type:nt["2D"],property:i,args:e})}),0),e.apply(this,o)}}));a.push(r)}catch(o){var s=dt(e.CanvasRenderingContext2D.prototype,i,{set:function(e){t(this.canvas,{type:nt["2D"],property:i,args:[e],setter:!0})}});a.push(s)}};try{for(var c=h(s),u=c.next();!u.done;u=c.next()){var d=u.value;l(d)}}catch(m){r={error:m}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}return function(){a.forEach((function(t){return t()}))}}var ne=ee;function ie(t,e){var n=[];try{var i=mt(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(n){for(var i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];return pt(this,e)||"__context"in this||(this.__context=n),t.apply(this,v([n],i))}}));n.push(i)}catch(r){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return function(){n.forEach((function(t){return t()}))}}for(var re=ie,oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae="undefined"===typeof Uint8Array?[]:new Uint8Array(256),se=0;se<oe.length;se++)ae[oe.charCodeAt(se)]=se;var le=function(t){var e,n=new Uint8Array(t),i=n.length,r="";for(e=0;e<i;e+=3)r+=oe[n[e]>>2],r+=oe[(3&n[e])<<4|n[e+1]>>4],r+=oe[(15&n[e+1])<<2|n[e+2]>>6],r+=oe[63&n[e+2]];return i%3===2?r=r.substring(0,r.length-1)+"=":i%3===1&&(r=r.substring(0,r.length-2)+"=="),r},ce=new Map;function ue(t,e){var n=ce.get(t);return n||(n=new Map,ce.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}var de=function(t,e,n){if(t&&(he(t,e)||"object"===typeof t)){var i=t.constructor.name,r=ue(n,i),o=r.indexOf(t);return-1===o&&(o=r.length,r.push(t)),o}};function me(t,e,n){if(t instanceof Array)return t.map((function(t){return me(t,e,n)}));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){var i=t.constructor.name;return{rr_type:i,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){var r=t.constructor.name,o=le(t);return{rr_type:r,base64:o}}if(t instanceof DataView){var a=t.constructor.name;return{rr_type:a,args:[me(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){var s=t.constructor.name,l=t.src;return{rr_type:s,src:l}}if(t instanceof ImageData){var c=t.constructor.name;return{rr_type:c,args:[me(t.data,e,n),t.width,t.height]}}if(he(t,e)||"object"===typeof t){var u=t.constructor.name,d=de(t,e,n);return{rr_type:u,index:d}}return t}var fe=function(t,e,n){return v(t).map((function(t){return me(t,e,n)}))},he=function(t,e){var n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"],i=n.filter((function(t){return"function"===typeof e[t]}));return Boolean(i.find((function(n){return t instanceof e[n]})))};function pe(t,e,n,i,r,o){var a,s,l=[],c=Object.getOwnPropertyNames(t),u=function(a){try{if("function"!==typeof t[a])return"continue";var c=mt(t,a,(function(s){return function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var u=s.apply(this,l);if(de(u,o,t),!pt(this.canvas,i)){r.getId(this.canvas);var d=fe(v(l),o,t),m={type:e,property:a,args:d};n(this.canvas,m)}return u}}));l.push(c)}catch(s){var u=dt(t,a,{set:function(t){n(this.canvas,{type:e,property:a,args:[t],setter:!0})}});l.push(u)}};try{for(var d=h(c),m=d.next();!m.done;m=d.next()){var f=m.value;u(f)}}catch(p){a={error:p}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return l}function ve(t,e,n,i){var r=[];return r.push.apply(r,v(pe(e.WebGLRenderingContext.prototype,nt.WebGL,t,n,i,e))),"undefined"!==typeof e.WebGL2RenderingContext&&r.push.apply(r,v(pe(e.WebGL2RenderingContext.prototype,nt.WebGL2,t,n,i,e))),function(){r.forEach((function(t){return t()}))}}var ye,ge,be=ve,Se=function(){function t(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=function(t,e){var n=this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId;!n&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)},this.mutationCb=t.mutationCb,this.mirror=t.mirror,!0===t.recordCanvas&&this.initCanvasMutationObserver(t.win,t.blockClass)}return t.prototype.reset=function(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()},t.prototype.freeze=function(){this.frozen=!0},t.prototype.unfreeze=function(){this.frozen=!1},t.prototype.lock=function(){this.locked=!0},t.prototype.unlock=function(){this.locked=!1},t.prototype.initCanvasMutationObserver=function(t,e){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();var n=re(t,e),i=ne(this.processMutation.bind(this),t,e,this.mirror),r=be(this.processMutation.bind(this),t,e,this.mirror);this.resetObservers=function(){n(),i(),r()}},t.prototype.startPendingCanvasMutationFlusher=function(){var t=this;requestAnimationFrame((function(){return t.flushPendingCanvasMutations()}))},t.prototype.startRAFTimestamping=function(){var t=this,e=function(n){t.rafStamps.latestId=n,requestAnimationFrame(e)};requestAnimationFrame(e)},t.prototype.flushPendingCanvasMutations=function(){var t=this;this.pendingCanvasMutations.forEach((function(e,n){var i=t.mirror.getId(n);t.flushPendingCanvasMutationFor(n,i)})),requestAnimationFrame((function(){return t.flushPendingCanvasMutations()}))},t.prototype.flushPendingCanvasMutationFor=function(t,e){if(!this.frozen&&!this.locked){var n=this.pendingCanvasMutations.get(t);if(n&&-1!==e){var i=n.map((function(t){t.type;var e=f(t,["type"]);return e})),r=n[0].type;this.mutationCb({id:e,type:r,commands:i}),this.pendingCanvasMutations.delete(t)}}},t}();function Ce(t){return m(m({},t),{timestamp:Date.now()})}var Ie=st();function we(t){void 0===t&&(t={});var e=t.emit,n=t.checkoutEveryNms,i=t.checkoutEveryNth,r=t.blockClass,o=void 0===r?"rr-block":r,a=t.blockSelector,s=void 0===a?null:a,l=t.ignoreClass,c=void 0===l?"rr-ignore":l,u=t.maskTextClass,d=void 0===u?"rr-mask":u,f=t.maskTextSelector,v=void 0===f?null:f,y=t.inlineStylesheet,g=void 0===y||y,b=t.maskAllInputs,S=t.maskInputOptions,C=t.slimDOMOptions,I=t.maskInputFn,w=t.maskTextFn,k=t.hooks,T=t.packFn,_=t.sampling,x=void 0===_?{}:_,D=t.mousemoveWait,M=t.recordCanvas,E=void 0!==M&&M,O=t.userTriggeredOnInput,R=void 0!==O&&O,N=t.collectFonts,F=void 0!==N&&N,L=t.inlineImages,A=void 0!==L&&L,j=t.plugins,V=t.keepIframeSrcFn,P=void 0===V?function(){return!1}:V;if(!e)throw new Error("emit function is required");void 0!==D&&void 0===x.mousemove&&(x.mousemove=D);var z,$=!0===b?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==S?S:{password:!0},W=!0===C||"all"===C?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===C,headMetaDescKeywords:"all"===C}:C||{};bt();var q=0,G=function(t){var e,n;try{for(var i=h(j||[]),r=i.next();!r.done;r=i.next()){var o=r.value;o.eventProcessor&&(t=o.eventProcessor(t))}}catch(a){e={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return T&&(t=T(t)),t};ye=function(t,r){var o;if((null===(o=Ot[0])||void 0===o?void 0:o.isFrozen())&&t.type!==Z.FullSnapshot&&(t.type!==Z.IncrementalSnapshot||t.data.source!==tt.Mutation)&&Ot.forEach((function(t){return t.unfreeze()})),e(G(t),r),t.type===Z.FullSnapshot)z=t,q=0;else if(t.type===Z.IncrementalSnapshot){if(t.data.source===tt.Mutation&&t.data.isAttachIframe)return;q++;var a=i&&q>=i,s=n&&t.timestamp-z.timestamp>n;(a||s)&&ge(!0)}};var U=function(t){ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.Mutation},t)}))},B=function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.Scroll},t)}))},J=function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.CanvasMutation},t)}))},H=new Zt({mutationCb:U}),Y=new Se({recordCanvas:E,mutationCb:J,win:window,blockClass:o,mirror:Ie}),X=new te({mutationCb:U,scrollCb:B,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:v,inlineStylesheet:g,maskInputOptions:$,maskTextFn:w,maskInputFn:I,recordCanvas:E,inlineImages:A,sampling:x,slimDOMOptions:W,iframeManager:H,canvasManager:Y},mirror:Ie});ge=function(t){var e,n,i,r;void 0===t&&(t=!1),ye(Ce({type:Z.Meta,data:{href:window.location.href,width:ht(),height:ft()}}),t),Ot.forEach((function(t){return t.lock()}));var a=p(Q(document,{blockClass:o,blockSelector:s,maskTextClass:d,maskTextSelector:v,inlineStylesheet:g,maskAllInputs:$,maskTextFn:w,slimDOM:W,recordCanvas:E,inlineImages:A,onSerialize:function(t){St(t)&&H.addIframe(t),Ct(t)&&X.addShadowRoot(t.shadowRoot,document)},onIframeLoad:function(t,e){H.attachIframe(t,e)},keepIframeSrcFn:P}),2),l=a[0],c=a[1];if(!l)return console.warn("Failed to snapshot the document");Ie.map=c,ye(Ce({type:Z.FullSnapshot,data:{node:l,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(r=null===(i=null===document||void 0===document?void 0:document.body)||void 0===i?void 0:i.parentElement)||void 0===r?void 0:r.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),Ot.forEach((function(t){return t.unlock()}))};try{var K=[];K.push(at("DOMContentLoaded",(function(){ye(Ce({type:Z.DomContentLoaded,data:{}}))})));var et=function(t){var e;return Qt({mutationCb:U,mousemoveCb:function(t,e){return ye(Ce({type:Z.IncrementalSnapshot,data:{source:e,positions:t}}))},mouseInteractionCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.MouseInteraction},t)}))},scrollCb:B,viewportResizeCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.ViewportResize},t)}))},inputCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.Input},t)}))},mediaInteractionCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.MediaInteraction},t)}))},styleSheetRuleCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.StyleSheetRule},t)}))},styleDeclarationCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.StyleDeclaration},t)}))},canvasMutationCb:J,fontCb:function(t){return ye(Ce({type:Z.IncrementalSnapshot,data:m({source:tt.Font},t)}))},blockClass:o,ignoreClass:c,maskTextClass:d,maskTextSelector:v,maskInputOptions:$,inlineStylesheet:g,sampling:x,recordCanvas:E,inlineImages:A,userTriggeredOnInput:R,collectFonts:F,doc:t,maskInputFn:I,maskTextFn:w,blockSelector:s,slimDOMOptions:W,mirror:Ie,iframeManager:H,shadowDomManager:X,canvasManager:Y,plugins:(null===(e=null===j||void 0===j?void 0:j.filter((function(t){return t.observer})))||void 0===e?void 0:e.map((function(t){return{observer:t.observer,options:t.options,callback:function(e){return ye(Ce({type:Z.Plugin,data:{plugin:t.name,payload:e}}))}}})))||[]},k)};H.addLoadListener((function(t){K.push(et(t.contentDocument))}));var nt=function(){ge(),K.push(et(document))};return"interactive"===document.readyState||"complete"===document.readyState?nt():K.push(at("load",(function(){ye(Ce({type:Z.Load,data:{}})),nt()}),window)),function(){K.forEach((function(t){return t()}))}}catch(it){console.warn(it)}}we.addCustomEvent=function(t,e){if(!ye)throw new Error("please add custom event after start recording");ye(Ce({type:Z.Custom,data:{tag:t,payload:e}}))},we.freezePage=function(){Ot.forEach((function(t){return t.freeze()}))},we.takeFullSnapshot=function(t){if(!ge)throw new Error("please take full snapshot after start recording");ge(t)},we.mirror=Ie;var ke=we,Te={name:"login",components:{countTo:l.a,date:c["a"],classDialog:u["default"],keyboard:d["default"]},data:function(){return{api:n("3602").default,isMB:!1,data:{TermId:null,TermNumber:"",ClassId:null,Class:"",Sections:[]},section:{ClassId:null,Class:"",SectionId:null,SectionName:"",Subject:"",Teacher:"",TimetableDtsId:null,SubjectId:0,TeacherId:0,Dts:[],StartTime2:"",EndTime2:"",RollCallStartTime2:"",RollCallEndTime2:"",AttendanceId:0,CreateTime:null,Reamrk:"",Code:""},showPwd:!0,submit:null,lostTime:!1,interval:null,can_rc:!1,no_section:!1,isLoading:!1,rules:{Code:[{required:!0,message:"请输入验证码"}]},keys:["1","2","3","4","5","6","7","8","9","0"],show_test:!1,test_time:"",test_Ip:"",btn_test:!1,indb:null,webDb:null}},mounted:function(){var t=this,e={name:"RrWebTable"};this.$indb.openDB("RrWebDb",1,null,e,(function(e){t.webDb=e,t.deleteDb(t.webDb),ke({emit:function(e){t.add(e)},inlineStylesheet:!1})}));var n={name:"ActionTable",key:"PkId"};this.$indb.openDB("ActionDb",1,null,n,(function(e){t.indb=e,t.deleteDb(t.indb);try{t.insert("进入教师登录页面")}catch(n){}}));var i=localStorage.getItem("current_class");i&&localStorage.removeItem("current_class"),this.$route.query&&"1"==this.$route.query.test?this.btn_test=!0:this.btn_test=!1;var r=localStorage.getItem("test_time");r&&(this.test_time=r);var o=localStorage.getItem("test_ip");o&&(this.test_Ip=o),console.log(r,o),this.isMB=this.$commonJs.isMb();var a=localStorage.getItem("section");if(a)this.getClassInfo();else if(this.isMB){var s=sessionStorage.getItem("current_class");s?this.getClassInfo():this.isMB?this.showMsg("请先点击左下角设置按钮，设置班级"):this.showMsg("请先点击班级栏的设置按钮，设置班级")}else this.getClassInfo()},destroyed:function(){clearInterval(this.interval)},methods:{test_reset_time:function(){localStorage.setItem("test_time",this.test_time),console.log("this.section",this.section),this.submit=null,this.getClassInfo()},test_reset:function(){localStorage.setItem("test_ip",this.test_Ip),localStorage.removeItem("teacher_token"),localStorage.removeItem("section"),this.data=this.$options.data().data,this.clearSection(),this.submit=null,this.getClassInfo()},test_db:function(){console.log("indb",this.indb)},deleteDb:function(t){var e=(new Date).setDate((new Date).getDate()-7),n=this.$commonJs.toDateString(e);this.$indb.deleteByDate(t,n)},clearSection:function(){this.section.ClassId=null,this.section.Class="",this.section.SectionId=null,this.section.SectionName="",this.section.Subject="",this.section.Teacher="",this.section.Dts=[],this.section.SubjectId=0,this.section.TimetableDtsId=null,this.section.TeacherId=0,this.section.StartTime2="",this.section.EndTime2="",this.section.RollCallStartTime2="",this.section.RollCallEndTime2="",this.section.AttendanceId=0,this.section.CreateTime=null,this.section.Reamrk="",this.section.Code=""},onSave:function(){console.log("on-save"),localStorage.removeItem("teacher_token"),localStorage.removeItem("section"),this.data=this.$options.data().data,this.clearSection(),this.submit=null,this.getClassInfo()},showkb:function(){this.$refs.keyboard.open(this.section.Code)},listen:function(t){if(this.keys.indexOf(t.key)>-1&&this.section.Code.length<4&&(this.section.Code=this.section.Code+t.key),"Backspace"==t.key){var e=this.section.Code.length;e>0&&(this.section.Code=this.section.Code.substring(0,e-1))}},cs:function(t){var e=this.section.Dts.find((function(e){return e.TimetableDtsId==t}));this.section.Teacher=e.Teacher,this.section.SubjectId=e.SubjectId,this.section.Subject=e.Subject,this.section.TeacherId=e.TeacherId},setCode:function(t){this.section.Code=t},setTime:function(){null==this.interval&&(this.interval=setInterval(this.intervalFunc,1e3))},intervalFunc:function(){var t=this.test_time?new Date(this.test_time):new Date;if(this.setSection(),!this.no_section){t<this.section.EndTime2&&(this.lostTime=t>this.section.RollCallEndTime2);var e=localStorage.getItem("section");if(e){this.submit=JSON.parse(e);var n="YYYY/MM/DD",i=this.$commonJs.toDateFormat(this.submit.CreateTime,n),r=this.$commonJs.toDateFormat(t,n);this.submit.SectionId==this.section.SectionId&&i==r||(console.log("课程变动_remove_token"),this.submit=null,this.section.AttendanceId=0,this.section.CreateTime=null,this.section.Reamrk="",this.section.Code="",localStorage.removeItem("teacher_token"),console.log("课程变动_remove_section"),localStorage.removeItem("section"))}}},getClassInfo:function(){var t=this,e=new Date;this.test_time&&(e=this.$commonJs.toDatetimeString(this.test_time));var n=0,i=sessionStorage.getItem("current_class");if(i){var r=JSON.parse(i);n=null==r.SelectId?0:r.SelectId}this.api.getCurriculumV2(this.test_Ip,e,n).then((function(e){0==e.Code?(t.data=e.Data,t.data.Sections=t.data.Sections.map((function(e){var n=Object(a["a"])({},e),i="YYYY/MM/DD HH:mm:ss",r=t.$commonJs.toDateFormat(n.StartTime2,i);n.StartTime2=new Date(r);var o=t.$commonJs.toDateFormat(n.EndTime2,i);n.EndTime2=new Date(o);var s=t.$commonJs.toDateFormat(n.RollCallStartTime2,i);n.RollCallStartTime2=new Date(s);var l=t.$commonJs.toDateFormat(n.RollCallEndTime2,i);return n.RollCallEndTime2=new Date(l),n})),t.setSection(),t.intervalFunc(),null!=t.submit&&(t.section.AttendanceId=t.submit.AttendanceId,t.section.TimetableDtsId=t.submit.TimetableDtsId,t.section.Teacher=t.submit.Teacher,t.section.SubjectId=t.submit.SubjectId,t.section.Subject=t.submit.Subject,t.section.TeacherId=t.submit.TeacherId,t.section.CreateTime=t.submit.CreateTime,t.section.Code=t.submit.Code,t.section.Reamrk=t.submit.Remark),t.setTime()):t.showMsg(e.Msg)}))},setSection:function(){var t=this,e=this.test_time?new Date(this.test_time):new Date,n=null;this.data.Sections.forEach((function(i,r){var o=null;if(0!=r)o=t.data.Sections[r-1].EndTime2;else{var a="YYYY/MM/DD",s=t.$commonJs.toDateFormat(i.StartTime2,a);o=new Date(s+" 00:00:00")}var l=i.EndTime2;o<=e&&l>=e&&(n=i,t.can_rc=i.RollCallStartTime2<=e&&i.RollCallEndTime2>=e)})),n?(this.no_section=!1,this.section.SectionId!=n.SectionId&&(this.section.ClassId=this.data.ClassId,this.section.Class=this.data.Class,this.section.SectionId=n.SectionId,this.section.SectionName=n.SectionName,this.section.Subject=n.Subject,this.section.Dts=n.Dts,n.Dts.length>0&&(this.section.TimetableDtsId=n.Dts[0].TimetableDtsId,this.section.Teacher=n.Dts[0].Teacher,this.section.SubjectId=n.Dts[0].SubjectId,this.section.Subject=n.Dts[0].Subject,this.section.TeacherId=n.Dts[0].TeacherId),this.section.StartTime2=new Date(n.StartTime2),this.section.EndTime2=new Date(n.EndTime2),this.section.RollCallStartTime2=new Date(n.RollCallStartTime2),this.section.RollCallEndTime2=new Date(n.RollCallEndTime2))):(this.no_section=!0,this.section.ClassId=null,this.section.Class="",this.section.SectionId=null,this.section.SectionName="",this.section.Subject="",this.section.Teacher="",this.section.Dts=[],this.section.TimetableDtsId=null,this.section.SubjectId=0,this.section.Subject="",this.section.TeacherId=0,this.section.StartTime2="",this.section.EndTime2="",this.section.RollCallStartTime2="",this.section.RollCallEndTime2="")},showMsg:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$msgbox({title:"提示",type:e,message:t}).then((function(t){})).catch((function(){}))},setting:function(){console.log("setting"),this.$refs.classDialog.open()},login:function(){var t=this;if(!this.isLoading)if(this.can_rc)this.$refs.form.validate().then((function(e){if(e){var n={timetableDtsId:t.section.TimetableDtsId,code:t.section.Code};try{t.insert("开始验证教师验证码")}catch(i){}t.isLoading=!0,t.api.checkV2(n).then((function(e){var n=t.$commonJs.toDatetimeString(t.test_time);if(console.log("check",n),t.isLoading=!1,0==e.Code){var r={lostTime:t.lostTime,SectionId:t.section.SectionId,ClassId:t.section.ClassId,TermId:t.data.TermId,Class:t.section.Class,Remark:t.section.Reamrk,Code:t.section.Code,Subject:t.section.Subject,TimetableDtsId:t.section.TimetableDtsId,SubjectId:t.section.SubjectId,TeacherId:t.section.TeacherId,Teacher:t.section.Teacher,AttendanceId:e.Data,AttendanceDate:n,RollCallEndTime2:t.section.RollCallEndTime2,StartTime2:t.section.StartTime2,EndTime2:t.section.EndTime2,CreateTime:""};0!=t.section.AttendanceId&&(r.CreateTime=t.section.CreateTime),localStorage.setItem("section",JSON.stringify(r)),localStorage.setItem("teacher_token",t.section.Code);try{t.insert("验证成功，开始跳转点名页面")}catch(i){}t.$router.push("/index").catch((function(t){}))}else{try{t.insert("验证失败，验证码错误")}catch(i){}t.showMsg("验证码错误")}}))}})).catch((function(){}));else{var e=this.test_time?new Date(this.test_time):new Date;if(e>this.section.RollCallEndTime2){var n=this.$commonJs.toDatetimeString(this.section.RollCallEndTime2);return void this.showMsg("点名结束时间："+n+"，现在无法点名。")}n=this.$commonJs.toDatetimeString(this.section.RollCallStartTime2);this.showMsg("点名开始时间："+n+"，现在无法点名。")}},insert:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$indb.insert(this.indb,[{PkId:Number(new Date),date:this.$commonJs.toDateString(new Date),sn:this.section.SectionId,subject:this.section.Subject,path:window.location.href,page:"验证码页面",action:t,remark:e,addtime:(new Date).toLocaleString()}])},add:function(t){var e=this.$commonJs.toDateString(new Date);this.$indb.insert(this.webDb,[Object(a["a"])({},t,{date:e})])}}},_e=Te,xe=n("2877"),De=Object(xe["a"])(_e,r,o,!1,null,null,null);e["default"]=De.exports},e3d0:function(t,e,n){},ec1b:function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=2)}([function(t,e,n){var i=n(4)(n(1),n(5),null,null);t.exports=i.exports},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);e.default={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator:function(t){return t>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default:function(t,e,n,i){return n*(1-Math.pow(2,-10*t/i))*1024/1023+e}}},data:function(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown:function(){return this.startVal>this.endVal}},watch:{startVal:function(){this.autoplay&&this.start()},endVal:function(){this.autoplay&&this.start()}},mounted:function(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start:function(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=(0,i.requestAnimationFrame)(this.count)},pauseResume:function(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause:function(){(0,i.cancelAnimationFrame)(this.rAF)},resume:function(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,(0,i.requestAnimationFrame)(this.count)},reset:function(){this.startTime=null,(0,i.cancelAnimationFrame)(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count:function(t){this.startTime||(this.startTime=t),this.timestamp=t;var e=t-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.localStartVal-this.startVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=(0,i.requestAnimationFrame)(this.count):this.$emit("callback")},isNumber:function(t){return!isNaN(parseFloat(t))},formatNumber:function(t){t=t.toFixed(this.decimals),t+="";var e=t.split("."),n=e[0],i=e.length>1?this.decimal+e[1]:"",r=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;r.test(n);)n=n.replace(r,"$1"+this.separator+"$2");return this.prefix+n+i+this.suffix}},destroyed:function(){(0,i.cancelAnimationFrame)(this.rAF)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=r.default,"undefined"!=typeof window&&window.Vue&&window.Vue.component("count-to",r.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=0,r="webkit moz ms o".split(" "),o=void 0,a=void 0;if("undefined"==typeof window)e.requestAnimationFrame=o=function(){},e.cancelAnimationFrame=a=function(){};else{e.requestAnimationFrame=o=window.requestAnimationFrame,e.cancelAnimationFrame=a=window.cancelAnimationFrame;for(var s=void 0,l=0;l<r.length&&(!o||!a);l++)s=r[l],e.requestAnimationFrame=o=o||window[s+"RequestAnimationFrame"],e.cancelAnimationFrame=a=a||window[s+"CancelAnimationFrame"]||window[s+"CancelRequestAnimationFrame"];o&&a||(e.requestAnimationFrame=o=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-i)),r=window.setTimeout((function(){t(e+n)}),n);return i=e+n,r},e.cancelAnimationFrame=a=function(t){window.clearTimeout(t)})}e.requestAnimationFrame=o,e.cancelAnimationFrame=a},function(t,e){t.exports=function(t,e,n,i){var r,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(r=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),i){var l=Object.create(s.computed||null);Object.keys(i).forEach((function(t){var e=i[t];l[t]=function(){return e}})),s.computed=l}return{esModule:r,exports:o,options:s}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",[t._v("\n  "+t._s(t.displayValue)+"\n")])},staticRenderFns:[]}}])}))},f183:function(t,e,n){var i=n("d012"),r=n("861d"),o=n("5135"),a=n("9bf2").f,s=n("90e3"),l=n("bb2f"),c=s("meta"),u=0,d=Object.isExtensible||function(){return!0},m=function(t){a(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[c].objectID},h=function(t,e){if(!o(t,c)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[c].weakData},p=function(t){return l&&v.REQUIRED&&d(t)&&!o(t,c)&&m(t),t},v=t.exports={REQUIRED:!1,fastKey:f,getWeakData:h,onFreeze:p};i[c]=!0},f773:function(t,e,n){t.exports=n.p+"img/title.dbcf2892.png"}}]);
//# sourceMappingURL=chunk-18c24adf.c602be29.js.map